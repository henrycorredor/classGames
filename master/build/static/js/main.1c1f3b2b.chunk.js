(this.webpackJsonpmaster=this.webpackJsonpmaster||[]).push([[0],{38:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),c=n(23),r=n.n(c),o=n(7),i=n(8);var u=n(27),d=n(0),m=Object(a.createContext)();function j(){return Object(a.useContext)(m)}function l(e){var t=e.children,n=Object(a.useState)(""),s=Object(i.a)(n,2),c=s[0],r=s[1];return Object(a.useEffect)((function(){if(""===c){var e=Object(u.a)("/master");r(e)}return function(){""!==c&&c.close()}}),[c]),Object(d.jsx)(m.Provider,{value:c,children:t})}var b=Object(a.createContext)();function O(){return Object(a.useContext)(b)}var f=[{name:"Fast cards",id:"fastCards",settings:{needTeacher:!0,numberOfCardsOnBoard:4,maxPoints:10,showStudentsName:!0,showStudentChoises:!0,showWhoIsFirst:!0}},{name:"Memory Snake",id:"memorySnake",settings:{maxPoints:8,showStudentsName:!0}}],h={room:"",status:0,users:[],game:f[0]};function g(e){var t=e.children,n=function(e,t){var n="cg-master-fast-card-"+e,s=Object(a.useState)((function(){var e=localStorage.getItem(n);return e?JSON.parse(e):t})),c=Object(i.a)(s,2),r=c[0],o=c[1];return Object(a.useEffect)((function(){localStorage.setItem(n,JSON.stringify(r))}),[r,n]),[r,o]}("game-state",h),s=Object(i.a)(n,2),c=s[0],r=function(e){return function(t){e((function(e){return Object(o.a)(Object(o.a)({},e),t)}))}}(s[1]),u=Object(a.useState)(!0),m=Object(i.a)(u,2),l=m[0],O=m[1],g=j();return Object(a.useEffect)((function(){""!==g&&l&&(O(!1),g.on("update-user-list",(function(e){r({users:e})})),g.on("update-game-obj",(function(e){r({game:e})})),g.on("update-state",(function(e){console.log("miau",e),r(Object(o.a)({},e))})))}),[g,l,r]),Object(a.useEffect)((function(){if(""!==g){var e=c.room;g.removeAllListeners("connect"),g.on("connect",(function(){""!==e?g.emit("verify-room",e,(function(e,t){r(e?t:Object(o.a)(Object(o.a)({},h),{},{status:1}))})):r({status:1})}))}}),[g,c.id,c.room,r]),Object(d.jsx)(b.Provider,{value:{gameState:c,updateGameState:r,gamesList:f},children:t})}var x=n(19),v={fastCards:{needTeacher:"Designar un profesor",numberOfCardsOnBoard:"N\xfamero de cartas",maxPoints:"Puntos para ganar",showStudentsName:"Mostrar nombres",showStudentChoises:"Mostrar si la selecci\xf3n es correcta o no",showWhoIsFirst:"Mostrar el primero de cada turno"},memorySnake:{maxPoints:"Puntos para ganar",showStudentsName:"Mostrar nombres"}};function p(e){var t,n=e.gamesList,a=e.gameInfo,s=e.setGameInfo;function c(e){var t=e.target;s((function(e){return Object(o.a)(Object(o.a)({},e),{},{settings:Object(o.a)(Object(o.a)({},e.settings),{},Object(x.a)({},t.name,"checkbox"===t.type?t.checked:t.value))})}))}function r(e){var t=e.target,a=n.findIndex((function(e){return e.id===t.value}));s(Object(o.a)({},n[a]))}return Object(d.jsxs)("form",{className:"settings-form",children:[Object(d.jsx)("div",{className:"games-list",children:n.map((function(e){return Object(d.jsxs)("label",{children:[e.name,":",Object(d.jsx)("input",{type:"radio",name:"game",value:e.id,checked:e.id===a.id,onChange:r},e.id)]},e.id)}))}),(t=a.settings,Object.keys(t).map((function(e,n){var s="boolean"===typeof t[e]?"checkbox":"text";return"checkbox"===s?Object(d.jsx)("div",{children:Object(d.jsxs)("label",{children:[" ",v[a.id][e],":",Object(d.jsx)("input",{checked:a.settings[e],onChange:c,type:s,name:e})]})},n):Object(d.jsx)("div",{children:Object(d.jsxs)("label",{children:[" ",v[a.id][e],":",Object(d.jsx)("input",{value:a.settings[e],onChange:c,type:s,name:e})]})},n)})))]})}function S(){console.log("renderiza create room");var e=j(),t=O(),n=t.gameState,s=t.updateGameState,c=t.gamesList,r=Object(a.useState)(n.game),o=Object(i.a)(r,2),u=o[0],m=o[1];return Object(d.jsxs)("div",{className:"master-main-room",children:[Object(d.jsx)("button",{onClick:function(){e.emit("create-room",u,(function(e){s({room:e,status:2,game:u})}))},className:"b3",children:"Crear sala"}),Object(d.jsx)(p,{gamesList:c,gameInfo:u,setGameInfo:m})]})}function C(){var e=O(),t=e.gameState,n=e.updateGameState,s=j(),c=Object(a.useState)(""),r=Object(i.a)(c,2),o=r[0],u=r[1];function m(e){return t.game.settings.needTeacher&&!t.users.some((function(e){return"teacher"===e.rol}))?Object(d.jsx)("button",{onClick:function(){return function(e){s.emit("moderate-student",e,"set-teacher")}(e)},children:"Soy el profe"}):""}return Object(d.jsxs)("div",{className:"master-main-room",children:[Object(d.jsx)("div",{className:"small-board",children:t.room}),Object(d.jsx)("div",{className:"long-board",children:"Esperando participantes..."}),Object(d.jsx)("ul",{className:"long-board",children:t.users.map((function(e){return Object(d.jsxs)("li",{children:[e.name,Object(d.jsx)("button",{onClick:function(){return t=e.id,void s.emit("moderate-student",t,"reject");var t},children:"Expulsar"}),m(e.id,e.rol)]},e.id)}))}),""!==o&&Object(d.jsx)("div",{className:"long-board",children:o}),Object(d.jsx)("button",{className:"b3",onClick:function(){!t.users.some((function(e){return"teacher"===e.rol}))&&t.game.settings.needTeacher?u("No has seleccionado profesor"):t.users.length<2?u("Necesitamos m\xednimo de dos estudiantes estudiante"):s.emit("start-game",t.game,(function(){n({status:3})}))},children:"Comenzar"})]})}n(38);function N(){var e=O(),t=e.gameState,n=e.updateGameState,s=e.gamesList,c=Object(a.useState)(t.game),r=Object(i.a)(c,2),u=r[0],m=r[1],l=j();return Object(d.jsxs)("div",{className:"game-over",children:[Object(d.jsx)("div",{className:"small-board",children:"\xa1Muy bien!"}),Object(d.jsxs)("div",{className:"again-form",children:[Object(d.jsx)("button",{onClick:function(){n({settings:Object(o.a)({},u)}),l.emit("start-game",u,(function(){n({status:3})}))},className:"b3",children:"\xbfOtra vez?"}),Object(d.jsx)(p,{gameInfo:u,setGameInfo:m,gamesList:s})]})]})}function k(){var e=j();switch(O().gameState.status){case 0:return Object(d.jsx)("div",{children:"Conectando..."});case 1:return Object(d.jsx)(S,{});case 2:return Object(d.jsxs)("div",{children:[Object(d.jsx)(C,{}),Object(d.jsx)("button",{onClick:function(){return e.emit("print")},children:"Miau"})]});case 3:return Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{className:"small-board center",children:"Jugando"}),Object(d.jsx)("button",{onClick:function(){return e.emit("print")},children:"Miau"})]});case 4:return Object(d.jsx)(N,{});default:return Object(d.jsx)("div",{className:"small-board center",children:"Oops..."})}}n(39),n(40);function y(e){var t=e.children;return Object(d.jsx)("div",{className:"container",children:t})}var I=function(){return Object(d.jsx)(l,{children:Object(d.jsx)(g,{children:Object(d.jsx)(y,{children:Object(d.jsx)(k,{})})})})},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,42)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),c(e),r(e)}))};r.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(I,{})}),document.getElementById("root")),w()}},[[41,1,2]]]);
//# sourceMappingURL=main.1c1f3b2b.chunk.js.map